
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How To Write An API Without Even Trying</title>
    
      <meta name="description" content="">
    
    
    <meta name="author" content="Mark Bates">
    <link href="http://feeds.feedburner.com/MetaBates" rel="alternate" title="How To Write An API Without Even Trying" type="application/atom+xml">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/metabates/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/metabates/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
  </head>

  <body>
  <style>#forkongithub a{background:#000;color:#fff;text-decoration:none;font-family:arial, sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#3F9FD9;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:absolute;display:block;top:0;right:0;width:200px;overflow:hidden;height:200px;}#forkongithub a{width:200px;position:absolute;top:60px;right:-60px;transform:rotate(45deg);-webkit-transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}</style><span id="forkongithub" style='z-index: 9999;'><a href="https://github.com/markbates">Fork me on GitHub</a></span>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Mark Bates</a>
          <div class="nav-collapse">
            <ul class="nav">
              
              
              


  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archives</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/books.html">Books</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="span8">
          
<div class="page-header">
  <h1>How To Write An API Without Even Trying</h1>
  
    <h6>05 April 2012</h6>
  
</div>

<div class="row">
  <div class="span">
    <p>Recently I fell upon a way of working that I think is just fantastic. So far I have no complaints about it, and neither do my clients.</p>

<h3 id='how_i_used_to_work'>How I used to work</h3>

<p>In the past I would write my Rails applications just like everyone else did. I had all my business logic in my models and my controllers were very lightweight. Just enough to have the data I need to render the page.</p>

<p>My views on the other hand were big. They contained all of the view logic. There were loops to print things to the screen, helpers to make things easier to do in the view layer, forms, etc&#8230;</p>

<p>Somewhere near the end of the project my client would inevitably tell me they want me to build an API for them. Of course, this usually happens with only minutes left on the clock. So quickly, and hastily, I throw together a quick API for them. Sure I test the API with my test suite, but the API has never really been &#8220;tested&#8221;, in a real world sense.</p>

<p>This writing an API in a vacuum seems to be quite a common practice. Everyone knows they need an API, but people don&#8217;t put much thought into it because they&#8217;re too busy trying to crank out their great idea as fast as possible. This leads to less than stellar APIs, which can both hurt the business and make it difficult when the time comes to do things like build clients for mobile devices and desktops.</p>

<p>So how can we solve this problem without putting too much extra strain on us poor developers? The answer is incredibly simple, eat your own dog food.</p>

<h3 id='eating_the_dog_food_and_loving_it'>Eating the Dog Food (and loving it!)</h3>

<p>I, like a lot of my colleagues, have been turning to JavaScript frameworks, such as Backbone.js, to help create a richer, and more responsive, front-end user experience for the applications we write. A lot of what makes these types of frameworks so responsive is that they can make remote AJAX calls to your server to fetch, update, or destroy objects.</p>

<p>Since I&#8217;m doing all of my front-end work using Backbone, my Rails view layer has become almost not existent. I use views simply to launch my Backbone application. A typical view my look something like this:</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>All my views are responsible for now is launching the Backbone application to serve up the appropriate views and handle all of the user interaction. My controllers are also now even smaller. They are essentially just there to serve up that basic template page.</p>

<p>So what does all of this have to do with writing an API without trying?</p>

<p>Well, the Backbone application needs to communicate back to the server if the user wants to update, create, or destroy a resource, so why not simply write a very nice API to do that? You were going to spend all this time writing controllers and view logic anyway, why not move those controllers to the API and that view logic to Backbone.</p>

<p>The win is outstanding! Because you&#8217;ve written a full client, your actual application, for your API you know that your API is more than capable of letting others do the same. Your API works, it&#8217;s battle tested, it&#8217;s proven, and it exists! The best part is it didn&#8217;t take you any longer to write it either.</p>

<p>This pays off down the line in spades. For example, I&#8217;ve just finished up a project for a client and I took this exact approach. The client then asked me if I could write them a mobile application. I said sure, I created a new PhoneGap application and within a few minutes I copied in the Backbone models from my webapp I had written and was well on the way to writing a second full client for the API, and I didn&#8217;t even break a sweat.</p>
    <hr>
    
      <div class='tag_box'>
        <h5>Tags</h5>
        
        
           
            <a href="/tags.html#ruby-ref" class="tag">ruby</a>
           
            <a href="/tags.html#api-ref" class="tag">api</a>
           
            <a href="/tags.html#backbone-ref" class="tag">backbone</a>
           
            <a href="/tags.html#rails-ref" class="tag">rails</a>
          
        
        <hr />
      </div>
    
    
    <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f7cef9a0d4f7bd5"></script>
<!-- AddThis Button END -->
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2012/04/04/now-blogging-with-jekyll" title="Now Blogging with Jekyll">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/2012/04/15/capturing-and-uploading-photos-on-ios-with-phonegap" title="Capturing and Uploading Photos on iOS with PhoneGap (Cordova)">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'metabates'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>

</div>


        </div><!--/span-->
        <div class="span4">
          <a href="/books.html" class="thumbnail">
            <img src="/assets/images/2012/02/cover_300.png" />
          </a>
          <hr />

          <a class="twitter-timeline" href="https://twitter.com/markbates" data-widget-id="274503565609934848">Tweets by @markbates</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

          <hr />

          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Latest Posts</li>
              
                <li><a href="/2013/06/02/introducting-linelyticscom">Introducting LineLytics.com</a></li>
              
                <li><a href="/2013/01/01/announcing-metacaststv-screen-casts">Announcing MetaCasts.tv Screen Casts</a></li>
              
                <li><a href="/2012/12/15/javascript-prototypes-video">JavaScript Prototypes (Video)</a></li>
              
                <li><a href="/2012/12/08/getting-started-with-sinatra-video">Getting Started with Sinatra (Video)</a></li>
              
                <li><a href="/2012/12/02/getting-started-with-rack-video">Getting Started with Rack (Video)</a></li>
              
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>
          &copy; Mark Bates 2012 |
          <a href="http://feeds.feedburner.com/MetaBates">RSS</a> |
          <a href="http://twitter.com/markbates/" rel="me">Twitter</a> |
          <a href="http://github.com/markbates/" rel="me">GitHub</a> |
          <a href="mailto:mark+blog@markbates.com">Email</a>
        </p>
      </footer>

    </div><!--/.fluid-container-->

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9756583-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>

